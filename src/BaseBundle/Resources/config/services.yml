services:
  api_response_formatter:
    class: BaseBundle\Services\ApiResponseFormatter
    arguments: ['@error_message_handler']

  error_message_handler:
    class: BaseBundle\Models\ErrorMessageHandler
    arguments: ['@monolog.logger', '@translator.default']

  api_normalizer:
    class: BaseBundle\Controller\ApiNormalizer
    arguments: ['@object_normalizer']

  object_normalizer:
    class: Symfony\Component\Serializer\Normalizer\ObjectNormalizer
    arguments: ['@metadata_factory']
    calls:
        - [setSerializer, ['@serializer']]

  metadata_factory:
    class: Symfony\Component\Serializer\Mapping\Factory\ClassMetadataFactory
    arguments: ['@annotaion_loader']


  annotaion_loader:
    class: Symfony\Component\Serializer\Mapping\Loader\AnnotationLoader
    arguments: ['@annotations.cached_reader']